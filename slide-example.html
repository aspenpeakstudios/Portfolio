<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">  
  <title>Generic Slideshow Example</title> 
  <link rel='stylesheet' href='css/slide-example.css' />
  <link rel='stylesheet' href='js/components/horizontalSlider/horizontalSlider.css' />  
  <link rel='stylesheet' href='css/control-grid.css' />

  <style>
    .slide-group {
        grid-auto-columns: 50%;
    }
    .slide-viewer {
        border: 1px solid black;
    }

    .slide {
        inline-size: 80%;
        block-size: 80%;
    }
  </style>
</head>

<body>
<main>

    <h1>Universal Horizontal Slider Demo</h1>
    <p>
        Selected Index: <span class='index'></span>
    </p>
    <div class='compound-slider'>
        <div id='controlGrid1' class='control-grid'>Control Grid</div>
        <div id='photoSlider1' class='photoSlider'></div>
    </div>

    <p>
        Selected Index: <span class='index2'></span>
    </p>
    <div id='photoSlider2' class='photoSlider'></div>

</main>
</body>

<script src="/js/components/horizontalSlider/horizontalSlider.js"></script>
<!-- <script src="/Microanimations/js/components/horizontalSlider/horizontalSlider.js"></script> -->

<script src="/js/controlGrid.js"></script>
<!-- <script src="/Microanimations/js/controlGrid.js"></script> -->
<script>

    // GLOBAL DATA
    let selectedIndex = 0;
    const data = [{id: 1, text: "This is Slide 1", background: "#FFCF47"}, {id: 2, text: "Slide 2", background: "#7ADCEF"}, {id: 3, text: "3rd Slide", background: "#a78df5" }, {id:4, text:"Last Slide.  4", background: "#ff8686"}];

    // Custom Render function for the slides
    function renderSlide(item) {
        let html = `<div class='slide flex-center hide-content' data-id=${item.id} style='background-color:${item.background}'> <span class=''>${item.text}</span> </div>`;
        return html;
    }

    // App loads    
    let slideContainer1 = document.getElementById('photoSlider1');
    const slider1 = new HorizontalSlider(slideContainer1, data, renderSlide, 100, true, 0);

    let slideContainer2 = document.getElementById('photoSlider2');
    const slider2 = new HorizontalSlider(slideContainer2, data, renderSlide, 50, false, 0);

    // Listen for the slide to change
    slideContainer1.addEventListener('onslide', (e) => {         
        selectedIndex = e.detail.index;
        document.querySelector('.index').textContent += " > " + selectedIndex;
    })

    // Listen for the slide change to complete
    slideContainer1.addEventListener('onslidecomplete', (e) => {              
        selectedIndex = e.detail.index;
        document.querySelector('.index').textContent = selectedIndex;
    })


    // CONTROL GRID
    let controlGridContainer1 = document.getElementById('controlGrid1');
    const controlGrid1 = new ControlGrid(controlGridContainer1, data.length, selectedIndex);


    controlGridContainer1.addEventListener('onindexchange', (e) => {
        console.log("--------------------------");
        console.log(e.detail.index);
        slider1.setIndex(e.detail.index);
    })
    //

    // ---------------------

    // Listen for the slide to change
    slideContainer2.addEventListener('onslide', (e) => {         
        selectedIndex = e.detail.index;
        document.querySelector('.index2').textContent += " > " + selectedIndex;
    })

    // Listen for the slide change to complete
    slideContainer2.addEventListener('onslidecomplete', (e) => {              
        selectedIndex = e.detail.index;
        document.querySelector('.index2').textContent = selectedIndex;
    })


    // ---------------------


    /*  HANDLE RESIZE  */
    window.onresize = () => {  
        console.log("Resize Event Detected");  
        slider1.handleResize();
    }   


    // TESTING
    window.setTimeout(() => {
        //slider2.setSelectedIndex(1);
    }, 1000);


</script>

</html>